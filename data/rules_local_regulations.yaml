version: "2.0"
rules:
# ==== LOCAL REGULATIONS ====
  - rule: open places query
    steps:
    - intent: query_open_places
    - action: action_set_local
    - action: action_set_open
    - action: action_query_knowledgebase_cases
  - rule: more local rules
    condition:
    - slot_was_set:
      - regulations_type: local_regulations
    steps:
    - action: action_query_knowledgebase_cases
    - action: want_more_local_info_form
    - active_loop: want_more_local_info_form
  - rule: submit want_more_LI
    condition:
    - slot_was_set:
      - want_more_local_info: true
    steps:
    - action: local_regulations_form
    - active_loop: local_regulations_form
  - rule: activate local_regulations_form
    steps:
    - intent: query_local_regulations
    - action: correct_local_form
    - active_loop: correct_local_form
  - rule: denied local_regulations_form
    condition:
    - active_loop: correct_local_form
    - slot_was_set:
      - correct_info: false
    steps:
    - action: correct_local_form
    - active_loop: null
    - action: utter_rephrase
  - rule: confirmed local_regulations_form
    condition:
    - active_loop: correct_local_form
    - slot_was_set:
      - correct_info: true
    steps:
    - action: correct_local_form
    - active_loop: null
    - action: action_set_local
    - action: local_regulations_form
    - active_loop: local_regulations_form
  - rule: choose regulations type ->local
    condition:
    - active_loop: regulation_type_form
    - slot_was_set:
      - regulations_type: local_regulations
    steps:
    - action: regulation_type_form
    - active_loop: null
    - action: local_regulations_form
    - active_loop: local_regulations_form
  - rule: Submit local_regulations_form (DE)
    condition:
    - active_loop: local_regulations_form
    - slot_was_set:
      - country_to: Germany
    steps:
    - action: local_regulations_form
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    - action: open_places_form
    - active_loop: open_places_form
  - rule: Submit open_places_form
    condition:
    - active_loop: open_places_form
    steps:
    - action: open_places_form
    - active_loop: null
    - action: action_query_knowledgebase_cases
  - rule: local rules + inside
    condition:
    - active_loop: local_regulations_form
    - slot_was_set:
      - indoors/outdoors: indoors
    steps:
    - action: local_regulations_form
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    - action: open_places_form
    - active_loop: open_places_form
  - rule: Submit local_regulations_form + activate extended_local_regulations_form
    condition:
    - active_loop: local_regulations_form
    steps:
    - action: local_regulations_form
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    - action: extended_local_regulations_form
    - active_loop: extended_local_regulations_form
  - rule: Submit extended_local_regulations_form
    condition:
    - active_loop: extended_local_regulations_form
    steps:
    - action: extended_local_regulations_form
    - active_loop: null
    - action: open_places_form
    - active_loop: open_places_form